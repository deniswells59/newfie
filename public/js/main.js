"use strict";function connectCtrl(e,a,n){e.users=n,$("a.btn-floating").sideNav({menuWidth:300,edge:"right",closeOnClick:!0}),function(){var a={total:n.length,topic:{}};e.users.forEach(function(e){"Guide"===e.type?a.guide?a.guide++:a.guide=1:a.user?a.user++:a.user=1,e.interests.forEach(function(e){a.topic[e]?a.topic[e]++:a.topic[e]=1})}),e.counts=a,e.topics=Object.keys(a.topic)}(),e.all=function(){a.getAll({query:{},page:0}).then(function(a){e.users=n})},e.interestSelect=function(n){a.getAll({query:{interests:n}}).then(function(a){e.users=a})},e.typeSelect=function(n){a.getAll({query:{type:n}}).then(function(a){e.users=a})}}function BnBController(e,a,n){var i=this;e.selectedListing={},this.index=0,n.getResults().then(function(a){e.results=a}),e.newSelected=function(a){e.results[i.index].selected=!1,e.results[a].selected=!0,e.selectedListing=e.results[a],i.index=a},e.saveDialog=function(e){a.hide(e)},e.closeDialog=function(){a.cancel()}}function dashCtrl(e,a,n,i,t,l,r,o,s,v,u){n||e.go("home"),n.registered||e.go("registerNav.registerLang");var c=this;a.user=n,a.loading=!1,a.pending=!1,a.editting=!1,a.tmp=angular.copy(n),a.city="Click on the map to add new places",a.$watch("selectedTab",function(e,a){switch(e){case 0:i.url("/dash/profile");break;case 1:"Guide"===n.type?i.url("/dash/guide"):i.url("/dash/guide/intro");break;case 2:i.url("/dash/companions")}}),a.getLocation=function(e){a.pending||(a.loading=!0,c.location={lat:e.latLng.lat(),lng:e.latLng.lng()},a.user.places.push(c.location),l.getCity(c.location).then(function(e){a.city=e,"Cant find a city there..."!==e?(a.pending=!0,a.loading=!1,c.location.name=e):a.user.places.pop()}))},a.savePlace=function(){a.city="Click on the map to add new places",a.pending=!1,t.savePlace(c.location)},a.cancelPlace=function(){a.user.places.pop(),a.pending=!1,a.city="Click on the map to add new places"},a.newGuide=function(){t.becomeGuide().then(function(){a.user.type="Guide",i.url("/dash/guide")})},a.showAdvanced=function(e){if(!a.user.trip[0])return a.err="Enter a location above!";a.err=null;var n=u("sm")||u("xs");r.saveLocation(a.user.trip[0].location),v.show({controller:BnBController,templateUrl:"../html/dash/airbnbResults.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:n}).then(function(e){a.user.trip[0].airBnB=e},function(){console.log("Cancelled")})},a.saveGuide=function(){t.saveGuide(a.user.trip[0]).then(function(e){a.user=e})},a.editBio=function(){a.editting=!a.editting},a.saveBio=function(){a.editBio(),t.editProfile(a.tmp).then(function(e){a.user=e,a.tmp=angular.copy(e)})},a.acceptCompanion=function(e){o.acceptCompanion(e).then(function(e){a.user=e})},a.declineCompanion=function(e){o.declineRequest(e).then(function(e){a.user=e})},a.openMessages=function(e,a){s.getCompanion(n.companions,a),v.show({controller:messagesCtrl,templateUrl:"../html/dash/messages.html",targetEvent:e,clickOutsideToClose:!0})}}function messagesCtrl(e,a,n,i){var t=n.getCompanionMessages();e.messages=new i({},{dataset:t}),e.companion=n.returnsCompanion(),e.viewing=!1,e.length=t.length,e.newMessage={_id:e.companion._id},e.sendMessage=function(){n.sendMessage(e.newMessage).then(function(n){e.sent=!0,e.newMessage.content="",a(function(){e.sent=!1},5e3)})},e.viewMessage=function(a){a["new"]=!1,n.read(a._id).then(function(a){e.currentMessage=a,e.viewing=!0})},e.goBack=function(){e.viewing=!1}}function homeCtrl(e,a,n){e.imgLoaded=!1,e.sent=!1,e.sending=!1,e.email={},e.sendFeedback=function(){$(".form").addClass("animated fadeOut"),a(function(){e.sending=!0,n.sendFeedback(e.email).then(function(){e.sending=!1,e.sent=!0})},1500)},e.animateCircleIn=function(e){e.removeClass("hidden"),e.addClass("animated fadeInLeft")},e.animateConnectIn=function(e){e.removeClass("hidden"),e.addClass("animated fadeInLeft")},e.animateTitleIn=function(e){e.removeClass("hidden"),e.addClass("animated fadeIn")}}function navState(e,a,n){var i=(n[0].clientHeight,0);$(".landingImage").length&&(i=$(".landingImage")[0].clientHeight);""===a||"home"===a?n[0].style.backgroundColor="rgba(85,150,126, 0.05)":n[0].style.backgroundColor="#55967e"}function profileCtrl(e,a,n,i){n.currentUser=a,n.profile=e,n.trip=e.trip[0],n.friendRequest=!1,a&&e.requests.indexOf(a._id)===-1&&a.companions.indexOf(e._id)===-1&&(n.friendRequest=!0),n.sendRequest=function(){i.sendRequest(e._id).then(function(e){n.friendRequest=!1})}}function registerCtrl(e,a,n,i,t,l,r,o,s,v,u){function c(e){w.selectedLangs.length&&r.saveLangs(w.selectedLangs),w.selectedInterests.length&&r.saveInterests(w.selectedInterests),w.city&&e?r.saveLocation(w.city,e):w.customCity&&r.saveLocation(w.customCity,!1)}function d(n){var i=n?w.languages.filter(m(n)):w.languages,t=void 0;return w.simulateQuery?(t=a.defer(),e(function(){t.resolve(i)},1e3*Math.random(),!1),t.promise):i}function m(e){return function(a){return 0===a.value.indexOf(e)}}function f(e){e&&w.selectedLangs.push(angular.copy(e))}function g(e){var a=void 0;w.selectedLangs.some(function(n,i){if(n.name===e)return a=i,!0}),w.selectedLangs.splice(a,1)}function h(e){var a=void 0;w.selectedInterests.some(function(n,i){if(n.name===e)return a=i,!0}),w.selectedInterests.splice(a,1)}function p(){w.duoErr=null,w.waiting=!1,w.checking=!0,o.verifyLanguages(w.selectedLangs,w.duoUser).then(function(e){w.checking=!1,"object"===("undefined"==typeof e?"undefined":_typeof(e))?(w.done=!0,w.selectedLangs=e):(w.waiting=!0,w.duoErr=e,console.log(w.duoErr))})}function N(){w.selectedInterests.push(angular.copy(w.customInterest)),w.customInterest=""}function k(){var e=w.map.getCenter();w.lat=e.lat(),w.lng=e.lng(),s.getCity({lat:w.lat,lng:w.lng}).then(function(e){w.city=e})}function b(e){w.lat=e.latLng.lat(),w.lng=e.latLng.lng(),s.getCity({lat:w.lat,lng:w.lng}).then(function(e){w.city=e})}function y(){r.confirm(w.regName)}l.isAuthenticated()||t.go("home");var w=this;u.$on("$stateChangeStart",function(e,a,n,i,t){w.breadCrumb=a.url}),w.breadCrumb="/languages",w.simulateQuery=!0,w.languages=langObj,w.querySearch=d,w.selectedItemChange=f,w.removeLang=g,w.removeInt=h,w.nextClicked=c,w.addCustom=N,w.mapCallback=k,w.replaceMarker=b,w.verifyDuoUser=p,w.confirmUser=y,w.interests=["Food","Nature","Attractions","City","Home Life","Party Life"],w.user=r.getUser(),w.waiting=!0,w.checking=!1,w.done=!1,w.selectedLangs=[],w.selectedInterests=[],w.city="",w.customCity="",w.lng=0,w.lat=0,w.searchTerm,w.customInterest="",v.getMap().then(function(e){e.addListener("tilesloaded",k),w.map=e})}connectCtrl.$inject=["$scope","User","users"],BnBController.$inject=["$scope","$mdDialog","AirBnB"],dashCtrl.$inject=["$state","$scope","user","$location","User","Location","AirBnB","Companion","Messages","$mdDialog","$mdMedia"],messagesCtrl.$inject=["$scope","$timeout","Messages","NgTableParams"],homeCtrl.$inject=["$scope","$timeout","Mail"],profileCtrl.$inject=["profile","user","$scope","Companion"],registerCtrl.$inject=["$timeout","$q","$log","$scope","$state","$auth","User","DuoLingo","Location","NgMap","$rootScope"];var langObj=[{code:"ab",name:"Abkhaz",nativeName:"аҧсуа",value:"abkhaz",verified:!1,level:0},{code:"aa",name:"Afar",nativeName:"Afaraf",value:"afar",verified:!1,level:0},{code:"af",name:"Afrikaans",nativeName:"Afrikaans",value:"afrikaans",verified:!1,level:0},{code:"ak",name:"Akan",nativeName:"Akan",value:"akan",verified:!1,level:0},{code:"sq",name:"Albanian",nativeName:"Shqip",value:"albanian",verified:!1,level:0},{code:"am",name:"Amharic",nativeName:"አማርኛ",value:"amharic",verified:!1,level:0},{code:"ar",name:"Arabic",nativeName:"العربية",value:"arabic",verified:!1,level:0},{code:"an",name:"Aragonese",nativeName:"Aragonés",value:"aragonese",verified:!1,level:0},{code:"hy",name:"Armenian",nativeName:"Հայերեն",value:"armenian",verified:!1,level:0},{code:"as",name:"Assamese",nativeName:"অসমীয়া",value:"assamese",verified:!1,level:0},{code:"av",name:"Avaric",nativeName:"авар мацӀ, магӀарул мацӀ",value:"avaric",verified:!1,level:0},{code:"ae",name:"Avestan",nativeName:"avesta",value:"avestan",verified:!1,level:0},{code:"ay",name:"Aymara",nativeName:"aymar aru",value:"aymara",verified:!1,level:0},{code:"az",name:"Azerbaijani",nativeName:"azərbaycan dili",value:"azerbaijani",verified:!1,level:0},{code:"bm",name:"Bambara",nativeName:"bamanankan",value:"bambara",verified:!1,level:0},{code:"ba",name:"Bashkir",nativeName:"башҡорт теле",value:"bashkir",verified:!1,level:0},{code:"eu",name:"Basque",nativeName:"euskara, euskera",value:"basque",verified:!1,level:0},{code:"be",name:"Belarusian",nativeName:"Беларуская",value:"belarusian",verified:!1,level:0},{code:"bn",name:"Bengali",nativeName:"বাংলা",value:"bengali",verified:!1,level:0},{code:"bh",name:"Bihari",nativeName:"भोजपुरी",value:"bihari",verified:!1,level:0},{code:"bi",name:"Bislama",nativeName:"Bislama",value:"bislama",verified:!1,level:0},{code:"bs",name:"Bosnian",nativeName:"bosanski jezik",value:"bosnian",verified:!1,level:0},{code:"br",name:"Breton",nativeName:"brezhoneg",value:"breton",verified:!1,level:0},{code:"bg",name:"Bulgarian",nativeName:"български език",value:"bulgarian",verified:!1,level:0},{code:"my",name:"Burmese",nativeName:"ဗမာစာ",value:"burmese",verified:!1,level:0},{code:"ca",name:"Catalan; Valencian",nativeName:"Català",value:"catalan",verified:!1,level:0},{code:"ch",name:"Chamorro",nativeName:"Chamoru",value:"chamorro",verified:!1,level:0},{code:"ce",name:"Chechen",nativeName:"нохчийн мотт",value:"chechen",verified:!1,level:0},{code:"ny",name:"Chichewa; Chewa; Nyanja",nativeName:"chiCheŵa, chinyanja",value:"chichewa",verified:!1,level:0},{code:"zh",name:"Chinese",nativeName:"中文 (Zhōngwén), 汉语, 漢語",value:"chinese",verified:!1,level:0},{code:"cv",name:"Chuvash",nativeName:"чӑваш чӗлхи",value:"chuvash",verified:!1,level:0},{code:"kw",name:"Cornish",nativeName:"Kernewek",value:"cornish",verified:!1,level:0},{code:"co",name:"Corsican",nativeName:"corsu, lingua corsa",value:"corsican",verified:!1,level:0},{code:"cr",name:"Cree",nativeName:"ᓀᐦᐃᔭᐍᐏᐣ",value:"cree",verified:!1,level:0},{code:"hr",name:"Croatian",nativeName:"hrvatski",value:"croatian",verified:!1,level:0},{code:"cs",name:"Czech",nativeName:"česky, čeština",value:"czech",verified:!1,level:0},{code:"da",name:"Danish",nativeName:"dansk",value:"danish",verified:!1,level:0},{code:"dv",name:"Divehi; Dhivehi; Maldivian;",nativeName:"ދިވެހި",value:"divehi",verified:!1,level:0},{code:"nl",name:"Dutch",nativeName:"Nederlands, Vlaams",value:"dutch",verified:!1,level:0},{code:"en",name:"English",nativeName:"English",value:"english",verified:!1,level:0},{code:"eo",name:"Esperanto",nativeName:"Esperanto",value:"esperanto",verified:!1,level:0},{code:"et",name:"Estonian",nativeName:"eesti, eesti keel",value:"estonian",verified:!1,level:0},{code:"ee",name:"Ewe",nativeName:"Eʋegbe",value:"ewe",verified:!1,level:0},{code:"fo",name:"Faroese",nativeName:"føroyskt",value:"faroese",verified:!1,level:0},{code:"fj",name:"Fijian",nativeName:"vosa Vakaviti",value:"fijian",verified:!1,level:0},{code:"fi",name:"Finnish",nativeName:"suomi, suomen kieli",value:"finnish",verified:!1,level:0},{code:"fr",name:"French",nativeName:"français, langue française",value:"french",verified:!1,level:0},{code:"ff",name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular",value:"fula",verified:!1,level:0},{code:"gl",name:"Galician",nativeName:"Galego",value:"galician",verified:!1,level:0},{code:"ka",name:"Georgian",nativeName:"ქართული",value:"georgian",verified:!1,level:0},{code:"de",name:"German",nativeName:"Deutsch",value:"german",verified:!1,level:0},{code:"el",name:"Greek, Modern",nativeName:"Ελληνικά",value:"greek",verified:!1,level:0},{code:"gn",name:"Guaraní",nativeName:"Avañeẽ",value:"guaraní",verified:!1,level:0},{code:"gu",name:"Gujarati",nativeName:"ગુજરાતી",value:"gujarati",verified:!1,level:0},{code:"ht",name:"Haitian; Haitian Creole",nativeName:"Kreyòl ayisyen",value:"haitian",verified:!1,level:0},{code:"ha",name:"Hausa",nativeName:"Hausa, هَوُسَ",value:"hausa",verified:!1,level:0},{code:"he",name:"Hebrew (modern)",nativeName:"עברית",value:"hebrew",verified:!1,level:0},{code:"hz",name:"Herero",nativeName:"Otjiherero",value:"herero",verified:!1,level:0},{code:"hi",name:"Hindi",nativeName:"हिन्दी, हिंदी",value:"hindi",verified:!1,level:0},{code:"ho",name:"Hiri Motu",nativeName:"Hiri Motu",value:"hiri",verified:!1,level:0},{code:"hu",name:"Hungarian",nativeName:"Magyar",value:"hungarian",verified:!1,level:0},{code:"ia",name:"Interlingua",nativeName:"Interlingua",value:"interlingua",verified:!1,level:0},{code:"id",name:"Indonesian",nativeName:"Bahasa Indonesia",value:"indonesian",verified:!1,level:0},{code:"ga",name:"Irish",nativeName:"Gaeilge",value:"irish",verified:!1,level:0},{code:"ig",name:"Igbo",nativeName:"Asụsụ Igbo",value:"igbo",verified:!1,level:0},{code:"ik",name:"Inupiaq",nativeName:"Iñupiaq, Iñupiatun",value:"inupiaq",verified:!1,level:0},{code:"io",name:"Ido",nativeName:"Ido",value:"ido",verified:!1,level:0},{code:"is",name:"Icelandic",nativeName:"Íslenska",value:"icelandic",verified:!1,level:0},{code:"it",name:"Italian",nativeName:"Italiano",value:"italian",verified:!1,level:0},{code:"iu",name:"Inuktitut",nativeName:"ᐃᓄᒃᑎᑐᑦ",value:"inuktitut",verified:!1,level:0},{code:"ja",name:"Japanese",nativeName:"日本語 (にほんご／にっぽんご)",value:"japanese",verified:!1,level:0},{code:"jv",name:"Javanese",nativeName:"basa Jawa",value:"javanese",verified:!1,level:0},{code:"kl",name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut",value:"kalaallisut",verified:!1,level:0},{code:"kn",name:"Kannada",nativeName:"ಕನ್ನಡ",value:"kannada",verified:!1,level:0},{code:"kr",name:"Kanuri",nativeName:"Kanuri",value:"kanuri",verified:!1,level:0},{code:"ks",name:"Kashmiri",nativeName:"कश्मीरी, كشميري‎",value:"kashmiri",verified:!1,level:0},{code:"kk",name:"Kazakh",nativeName:"Қазақ тілі",value:"kazakh",verified:!1,level:0},{code:"km",name:"Khmer",nativeName:"ភាសាខ្មែរ",value:"khmer",verified:!1,level:0},{code:"ki",name:"Kikuyu, Gikuyu",nativeName:"Gĩkũyũ",value:"kikuyu",verified:!1,level:0},{code:"rw",name:"Kinyarwanda",nativeName:"Ikinyarwanda",value:"kinyarwanda",verified:!1,level:0},{code:"ky",name:"Kirghiz, Kyrgyz",nativeName:"кыргыз тили",value:"kirghiz",verified:!1,level:0},{code:"kv",name:"Komi",nativeName:"коми кыв",value:"komi",verified:!1,level:0},{code:"kg",name:"Kongo",nativeName:"KiKongo",value:"kongo",verified:!1,level:0},{code:"ko",name:"Korean",nativeName:"한국어 (韓國語), 조선말 (朝鮮語)",value:"korean",verified:!1,level:0},{code:"ku",name:"Kurdish",nativeName:"Kurdî, كوردی‎",value:"kurdish",verified:!1,level:0},{code:"kj",name:"Kwanyama, Kuanyama",nativeName:"Kuanyama",value:"kwanyama",verified:!1,level:0},{code:"la",name:"Latin",nativeName:"latine, lingua latina",value:"latin",verified:!1,level:0},{code:"lb",name:"Luxembourgish, Letzeburgesch",nativeName:"Lëtzebuergesch",value:"luxembourgish",verified:!1,level:0},{code:"lg",name:"Luganda",nativeName:"Luganda",value:"luganda",verified:!1,level:0},{code:"li",name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs",value:"limburgish",verified:!1,level:0},{code:"ln",name:"Lingala",nativeName:"Lingála",value:"lingala",verified:!1,level:0},{code:"lo",name:"Lao",nativeName:"ພາສາລາວ",value:"lao",verified:!1,level:0},{code:"lt",name:"Lithuanian",nativeName:"lietuvių kalba",value:"lithuanian",verified:!1,level:0},{code:"lu",name:"Luba-Katanga",nativeName:"",value:"luba",verified:!1,level:0},{code:"lv",name:"Latvian",nativeName:"latviešu valoda",value:"latvian",verified:!1,level:0},{code:"gv",name:"Manx",nativeName:"Gaelg, Gailck",value:"manx",verified:!1,level:0},{code:"mk",name:"Macedonian",nativeName:"македонски јазик",value:"macedonian",verified:!1,level:0},{code:"mg",name:"Malagasy",nativeName:"Malagasy fiteny",value:"malagasy",verified:!1,level:0},{code:"ms",name:"Malay",nativeName:"bahasa Melayu, بهاس ملايو‎",value:"malay",verified:!1,level:0},{code:"ml",name:"Malayalam",nativeName:"മലയാളം",value:"malayalam",verified:!1,level:0},{code:"mt",name:"Maltese",nativeName:"Malti",value:"maltese",verified:!1,level:0},{code:"mi",name:"Māori",nativeName:"te reo Māori",value:"māori",verified:!1,level:0},{code:"mr",name:"Marathi (Marāṭhī)",nativeName:"मराठी",value:"marathi",verified:!1,level:0},{code:"mh",name:"Marshallese",nativeName:"Kajin M̧ajeļ",value:"marshallese",verified:!1,level:0},{code:"mn",name:"Mongolian",nativeName:"монгол",value:"mongolian",verified:!1,level:0},{code:"na",name:"Nauru",nativeName:"Ekakairũ Naoero",value:"nauru",verified:!1,level:0},{code:"nv",name:"Navajo, Navaho",nativeName:"Diné bizaad, Dinékʼehǰí",value:"navajo",verified:!1,level:0},{code:"nb",name:"Norwegian Bokmål",nativeName:"Norsk bokmål",value:"norwegian",verified:!1,level:0},{code:"nd",name:"North Ndebele",nativeName:"isiNdebele",value:"north ndebele",verified:!1,level:0},{code:"ne",name:"Nepali",nativeName:"नेपाली",value:"nepali",verified:!1,level:0},{code:"ng",name:"Ndonga",nativeName:"Owambo",value:"ndonga",verified:!1,level:0},{code:"nn",name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk",value:"norwegian nynorsk",verified:!1,level:0},{code:"no",name:"Norwegian",nativeName:"Norsk",value:"norwegian",verified:!1,level:0},{code:"ii",name:"Nuosu",nativeName:"ꆈꌠ꒿ Nuosuhxop",value:"nuosu",verified:!1,level:0},{code:"nr",name:"South Ndebele",nativeName:"isiNdebele",value:"south ndebele",verified:!1,level:0},{code:"oc",name:"Occitan",nativeName:"Occitan",value:"occitan",verified:!1,level:0},{code:"oj",name:"Ojibwe, Ojibwa",nativeName:"ᐊᓂᔑᓈᐯᒧᐎᓐ",value:"ojibwe",verified:!1,level:0},{code:"om",name:"Oromo",nativeName:"Afaan Oromoo",value:"oromo",verified:!1,level:0},{code:"or",name:"Oriya",nativeName:"ଓଡ଼ିଆ",value:"oriya",verified:!1,level:0},{code:"os",name:"Ossetian, Ossetic",nativeName:"ирон æвзаг",value:"ossetian",verified:!1,level:0},{code:"pa",name:"Panjabi, Punjabi",nativeName:"ਪੰਜਾਬੀ, پنجابی‎",value:"panjabi",verified:!1,level:0},{code:"pi",name:"Pāli",nativeName:"पाऴि",value:"pāli",verified:!1,level:0},{code:"fa",name:"Persian",nativeName:"فارسی",value:"persian",verified:!1,level:0},{code:"pl",name:"Polish",nativeName:"polski",value:"polish",verified:!1,level:0},{code:"ps",name:"Pashto, Pushto",nativeName:"پښتو",value:"pashto",verified:!1,level:0},{code:"pt",name:"Portuguese",nativeName:"Português",value:"portuguese",verified:!1,level:0},{code:"qu",name:"Quechua",nativeName:"Runa Simi, Kichwa",value:"quechua",verified:!1,level:0},{code:"rm",name:"Romansh",nativeName:"rumantsch grischun",value:"romansh",verified:!1,level:0},{code:"rn",name:"Kirundi",nativeName:"kiRundi",value:"kirundi",verified:!1,level:0},{code:"ro",name:"Romanian, Moldavian, Moldovan",nativeName:"română",value:"romanian",verified:!1,level:0},{code:"ru",name:"Russian",nativeName:"русский язык",value:"russian",verified:!1,level:0},{code:"sa",name:"Sanskrit (Saṁskṛta)",nativeName:"संस्कृतम्",value:"sanskrit",verified:!1,level:0},{code:"sc",name:"Sardinian",nativeName:"sardu",value:"sardinian",verified:!1,level:0},{code:"sd",name:"Sindhi",nativeName:"सिन्धी, سنڌي، سندھی‎",value:"sindhi",verified:!1,level:0},{code:"se",name:"Northern Sami",nativeName:"Davvisámegiella",value:"sorthern sami",verified:!1,level:0},{code:"sm",name:"Samoan",nativeName:"gagana faa Samoa",value:"samoan",verified:!1,level:0},{code:"sg",name:"Sango",nativeName:"yângâ tî sängö",value:"sango",verified:!1,level:0},{code:"sr",name:"Serbian",nativeName:"српски језик",value:"serbian",verified:!1,level:0},{code:"gd",name:"Scottish Gaelic; Gaelic",nativeName:"Gàidhlig",value:"scottish",verified:!1,level:0},{code:"sn",name:"Shona",nativeName:"chiShona",value:"shona",verified:!1,level:0},{code:"si",name:"Sinhala, Sinhalese",nativeName:"සිංහල",value:"sinhala",verified:!1,level:0},{code:"sk",name:"Slovak",nativeName:"slovenčina",value:"slovak",verified:!1,level:0},{code:"sl",name:"Slovene",nativeName:"slovenščina",value:"slovene",verified:!1,level:0},{code:"so",name:"Somali",nativeName:"Soomaaliga, af Soomaali",value:"somali",verified:!1,level:0},{code:"st",name:"Southern Sotho",nativeName:"Sesotho",value:"southern sotho",verified:!1,level:0},{code:"es",name:"Spanish",nativeName:"español",value:"spanish",verified:!1,level:0},{code:"su",name:"Sundanese",nativeName:"Basa Sunda",value:"sundanese",verified:!1,level:0},{code:"sw",name:"Swahili",nativeName:"Kiswahili",value:"swahili",verified:!1,level:0},{code:"ss",name:"Swati",nativeName:"SiSwati",value:"swati",verified:!1,level:0},{code:"sv",name:"Swedish",nativeName:"svenska",value:"swedish",verified:!1,level:0},{code:"ta",name:"Tamil",nativeName:"தமிழ்",value:"tamil",verified:!1,level:0},{code:"te",name:"Telugu",nativeName:"తెలుగు",value:"telugu",verified:!1,level:0},{code:"tg",name:"Tajik",nativeName:"тоҷикӣ, toğikī, تاجیکی‎",value:"tajik",verified:!1,level:0},{code:"th",name:"Thai",nativeName:"ไทย",value:"thai",verified:!1,level:0},{code:"ti",name:"Tigrinya",nativeName:"ትግርኛ",value:"tigrinya",verified:!1,level:0},{code:"bo",name:"Tibetan Standard, Tibetan, Central",nativeName:"བོད་ཡིག",value:"tibetan",verified:!1,level:0},{code:"tk",name:"Turkmen",nativeName:"Türkmen, Түркмен",value:"turkmen",verified:!1,level:0},{code:"tl",name:"Tagalog",nativeName:"Wikang Tagalog",value:"tagalog",verified:!1,level:0},{code:"tn",name:"Tswana",nativeName:"Setswana",value:"tswana",verified:!1,level:0},{code:"to",name:"Tonga (Tonga Islands)",nativeName:"faka Tonga",value:"tonga",verified:!1,level:0},{code:"tr",name:"Turkish",nativeName:"Türkçe",value:"turkish",verified:!1,level:0},{code:"ts",name:"Tsonga",nativeName:"Xitsonga",value:"tsonga",verified:!1,level:0},{code:"tt",name:"Tatar",nativeName:"татарча, tatarça, تاتارچا‎",value:"tatar",verified:!1,level:0},{code:"tw",name:"Twi",nativeName:"Twi",value:"twi",verified:!1,level:0},{code:"ty",name:"Tahitian",nativeName:"Reo Tahiti",value:"tahitian",verified:!1,level:0},{code:"ug",name:"Uighur, Uyghur",nativeName:"Uyƣurqə, ئۇيغۇرچە‎",value:"uighur",verified:!1,level:0},{code:"uk",name:"Ukrainian",nativeName:"українська",value:"ukrainian",verified:!1,level:0},{code:"ur",name:"Urdu",nativeName:"اردو",value:"urdu",verified:!1,level:0},{code:"uz",name:"Uzbek",nativeName:"zbek, Ўзбек, أۇزبېك‎",value:"uzbek",verified:!1,level:0},{code:"ve",name:"Venda",nativeName:"Tshivenḓa",value:"venda",verified:!1,level:0},{code:"vi",name:"Vietnamese",nativeName:"Tiếng Việt",value:"vietnamese",verified:!1,level:0},{code:"vo",name:"Volapük",nativeName:"Volapük",value:"volapük",verified:!1,level:0},{code:"wa",name:"Walloon",nativeName:"Walon",value:"walloon",verified:!1,level:0},{code:"cy",name:"Welsh",nativeName:"Cymraeg",value:"welsh",verified:!1,level:0},{code:"wo",name:"Wolof",nativeName:"Wollof",value:"wolof",verified:!1,level:0},{code:"fy",name:"Western Frisian",nativeName:"Frysk",value:"western",verified:!1,level:0},{code:"xh",name:"Xhosa",nativeName:"isiXhosa",value:"xhosa",verified:!1,level:0},{code:"yi",name:"Yiddish",nativeName:"ייִדיש",value:"yiddish",verified:!1,level:0},{code:"yo",name:"Yoruba",nativeName:"Yorùbá",value:"yoruba",verified:!1,level:0},{code:"za",name:"Zhuang, Chuang",nativeName:"Saɯ cueŋƅ, Saw cuengh",value:"zhuang",verified:!1,level:0}];$(document).ready(function(){$(".modal-trigger").leanModal()});var _isNotMobile=function(){var e=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),!e}(),app=angular.module("myApp",["ui.router","satellizer","ngMaterial","ngMap","ngTable","angular-scroll-animate"]);app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(e,a,n){e.state("login",{url:"/login",templateUrl:"/html/login.html",controller:"loginCtrl"}).state("registerNav",{url:"/register",templateUrl:"/html/register/registerNav.html"}).state("registerNav.registerLang",{url:"/languages",templateUrl:"/html/register/registerLang.html",controller:"registerCtrl"}).state("registerNav.registerInterests",{url:"/interests",templateUrl:"/html/register/registerInterests.html",controller:"registerCtrl"}).state("registerNav.registerLocation",{url:"/location",templateUrl:"/html/register/registerLocation.html",controller:"registerCtrl"}).state("registerNav.confirm",{url:"/confirm",templateUrl:"/html/register/regConfirm.html",controller:"registerCtrl"}).state("home",{url:"/",templateUrl:"/html/landing/home.html",controller:"homeCtrl"}).state("dashboard",{url:"/dash",templateUrl:"/html/dash/dash.html",controller:"dashCtrl",resolve:{user:["User",function(e){return e.getUser()}]}}).state("dashboard.profile",{url:"/profile",templateUrl:"/html/dash/profile.html",controller:"dashCtrl"}).state("dashboard.guideIntro",{url:"/guide/intro",templateUrl:"/html/dash/guideIntro.html",controller:"dashCtrl"}).state("dashboard.guide",{url:"/guide",templateUrl:"/html/dash/guide.html",controller:"dashCtrl"}).state("dashboard.companions",{url:"/companions",templateUrl:"/html/dash/companions.html",controller:"dashCtrl"}).state("connect",{url:"/connect",templateUrl:"/html/connect/connect.html",controller:"connectCtrl",resolve:{users:["User",function(e){return e.getAll({query:{},page:0})}]}}).state("profileView",{url:"/profile/:id",templateUrl:"/html/profile/profile.html",controller:"profileCtrl",resolve:{user:["User",function(e){return e.getUser()}],profile:["User","$stateParams",function(e,a){return e.getOne(a.id).then(function(e){return e.data})}]}}),a.otherwise("/"),n.google({clientId:"50096600078-riejkgcrs9iqkhbdmbfg07neh3ksodvg.apps.googleusercontent.com"}),n.facebook({name:"facebook",clientId:"1255637804476855",url:"/auth/facebook",responseType:"token",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",redirectUri:window.location.origin+"/",requiredUrlParams:["display","scope"],scope:["email"],scopeDelimiter:",",display:"popup",oauthType:"2.0",popupOptions:{width:580,height:400}})}]),app.controller("mainCtrl",["$scope","$state","$mdDialog","$auth","User",function(e,a,n,i,t){e.openDialog=function(e){n.show({targetEvent:e,templateUrl:"../html/landing/login.html",controller:"mainCtrl",clickOutsideToClose:!0})},e.isAuthenticated=function(){return i.isAuthenticated()},e.authenticate=function(e){i.authenticate(e).then(function(l){if("facebook"===e){i.getToken()}t.storeUser(l.data.user),n.hide(),l.data.user.registered?a.go("dashboard"):a.go("registerNav.registerLang")})["catch"](function(e){console.log("err",e)})},e.loginUser=function(){i.login(e.login).then(function(e){t.storeUser(e.data.user),n.hide(),e.data.user.registered?a.go("dashboard"):a.go("registerNav.registerLang")})},e.logout=function(){i.logout(),a.go("home")}}]),app.service("User",["$http","$state",function(e,a){var n=this;this.currentUser={},this.getAll=function(a){return e.put("api/users",a).then(function(e){return e.data})["catch"](function(e){console.log("err",e)})},this.getOne=function(a){return e.get("api/users/one/"+a)},this.storeUser=function(e){n.currentUser=e},this.login=function(a){return e.post("api/users/authenticate",a)},this.register=function(a){return e.post("api/users/register",a)},this.logout=function(){return e.post("api/users/logout")},this.isLoggedIn=function(){return e.get("/api/users/check").then(function(e){return n.currentUser=e.data,n.currentUser})["catch"](function(e){console.log("err",e)})},this.getUser=function(){return Object.keys(n.currentUser).length?n.currentUser:n.isLoggedIn()},this.saveLangs=function(e){n.currentUser.languages=e},this.saveInterests=function(e){n.currentUser.interests=e},this.saveLocation=function(e,a){n.currentUser.location={location:e,verified:a}},this.confirm=function(i){var t={languages:n.currentUser.languages,interests:n.currentUser.interests,location:n.currentUser.location};i&&(t.name=i),e.put("/api/users/register",t).then(function(e){n.currentUser=e.data,a.go("dashboard")})["catch"](function(e){return console.log("err",e)})},this.editProfile=function(a){return e.put("/api/users/update",a).then(function(e){return e.data})["catch"](function(e){return console.log("err",e)})},this.savePlace=function(a){return e.put("/api/users/place",a).then(function(e){n.currentUser=e.data})["catch"](function(e){return console.log("err",e)})},this.becomeGuide=function(){return e.put("/api/users/guide")},this.saveGuide=function(a){return e.put("/api/users/trip",a).then(function(e){return e.data})["catch"](function(e){console.log("err",e)})}}]),app.service("Location",["$http",function(e){this.getCity=function(a){return e.post("/api/location/city",a).then(function(e){return e.data})["catch"](function(e){return console.log("err",e)})}}]),app.service("DuoLingo",["$http",function(e){this.verifyLanguages=function(a,n){return e.post("/api/users/validate/languages",n).then(function(e){if("string"==typeof e.data)return e.data;var n=e.data;return a.forEach(function(e){n[e.name]&&(e.verified=!0,e.level=n[e.name])}),a})["catch"](function(e){return console.log("err",e)})}}]),app.service("AirBnB",["$http",function(e){var a=this;this.query={},this.saveLocation=function(e){a.query.location=e},this.getResults=function(n){return a.name&&(a.query.name=n),e.put("/api/airbnb/search",a.query).then(function(e){return e.data})["catch"](function(e){return console.log("err",e)})}}]),app.service("Companion",["$http",function(e){this.sendRequest=function(a){return e.post("/api/users/request",{companionId:a})},this.declineRequest=function(a){return e.post("api/users/decline",{companionId:a}).then(function(e){return e.data})["catch"](function(e){return console.log("err",e)})},this.acceptCompanion=function(a){return e.post("api/users/companion",{companionId:a}).then(function(e){return e.data})["catch"](function(e){return console.log("err",e)})}}]),app.service("Messages",["$http","User",function(e,a){var n=this;this.companion={},this.getCompanion=function(e,a){e.some(function(e){if(e._id===a)return n.companion=e,!0})},this.getCompanionMessages=function(){var e=a.getUser();return e.messages.filter(function(e){if(e.author===n.companion._id)return e})},this.returnsCompanion=function(){return n.companion},this.sendMessage=function(a){return e.post("api/users/messages",a).then(function(e){return e.data})["catch"](function(e){return console.log("err",e)})},this.read=function(a){return e.put("api/users/read",{
_id:a}).then(function(e){return e.data})["catch"](function(e){return console.log("err",e)})}}]),app.service("Mail",["$http",function(e){this.sendFeedback=function(a){return e.post("api/mail/",a)["catch"](function(e){return console.log("err",e)})}}]),app.controller("connectCtrl",connectCtrl),app.controller("BnBController",BnBController),app.controller("dashCtrl",dashCtrl),app.controller("messagesCtrl",messagesCtrl),app.controller("homeCtrl",homeCtrl),app.directive("loadingImage",function(){return function(e,a,n,i){a.bind("load",function(){e.imgLoaded=!0,e.$apply()})}}),app.directive("navState",["$window","$state","$rootScope","$animate",function(e,a,n,i){return function(i,t){n.$on("$stateChangeStart",function(a,n,i,l,r){navState(e,n.name,t)}),angular.element(e).bind("scroll",function(){var n=t[0].clientHeight,i=0;$(".landingImage").length&&(i=$(".landingImage")[0].clientHeight);var l=i-n;e.pageYOffset<=l?t[0].style.backgroundColor="rgba(85,150,126, 0.05)":(e.pageYOffset>l||!a.current.name)&&(t[0].style.backgroundColor="#55967e")})}}]),app.controller("profileCtrl",profileCtrl);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};app.controller("registerCtrl",registerCtrl);